{"version":3,"sources":["webpack:///user.bundle.js","webpack:///webpack/bootstrap ff689538fbcf41e7bb55?3c52*","webpack:///./javascript/User/src/Election.jsx"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","Election","React","createClass","displayName","getInitialState","election","currentSingle","currentMultiple","currentReferendum","single","multiple","referendum","ballotCount","referendumCount","stage","singleVote","multipleVote","referendumVote","unqualified","backToReview","surveyLink","supportLink","componentDidMount","this","load","$","getJSON","command","done","data","state","hasVoted","setState","singleLength","length","multipleLength","referendumLength","setStage","bind","window","scrollTo","getSingleKey","found","each","index","value","getMultipleKey","getReferendumKey","setCurrentSingle","setCurrentMultiple","setCurrentReferendum","resetStage","updateSingleVote","ticket","current","nextSingle","currentVote","updateMultipleVote","chairs","nextMultiple","updateReferendumVote","vote","nextReferendum","answer","finalVote","singleResult","push","singleId","ticketId","multipleResult","multipleId","referendumResult","referendumId","post","electionId","success","fail","render","content","review","createElement","className","onClick","Empty","Finished","Single","ballot","updateVote","Multiple","Referendum","Failure","Review","countdown","Countdown","getDefaultProps","props","title","href","seen","plural","item","_plural","ballots","totalItems","isAre","and","ReactDOM","document","getElementById"],"mappings":"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","file":"user.bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar Election = React.createClass({\n\t    displayName: 'Election',\n\t\n\t    getInitialState: function getInitialState() {\n\t        return {\n\t            election: null,\n\t            currentSingle: 0,\n\t            currentMultiple: 0,\n\t            currentReferendum: 0,\n\t            single: [],\n\t            multiple: [],\n\t            referendum: [],\n\t            ballotCount: 0,\n\t            referendumCount: 0,\n\t            stage: 'loading',\n\t            singleVote: [],\n\t            multipleVote: [],\n\t            referendumVote: [],\n\t            unqualified: [],\n\t            backToReview: false,\n\t            surveyLink: null,\n\t            supportLink: null\n\t        };\n\t    },\n\t\n\t    componentDidMount: function componentDidMount() {\n\t        this.load();\n\t    },\n\t\n\t    load: function load() {\n\t        $.getJSON('election/User/Election', {\n\t            command: 'list'\n\t        }).done(function (data) {\n\t            var stage = this.state.stage;\n\t            if (!data.election) {\n\t                this.setStage('empty');\n\t            } else if (data.hasVoted) {\n\t                this.setState({\n\t                    stage: 'finished',\n\t                    election: data.election\n\t                });\n\t            } else {\n\t                var singleLength = data.single.length;\n\t                var multipleLength = data.multiple.length;\n\t                var referendumLength = data.referendum.length;\n\t\n\t                /* If there are no single-type elections, then skip to multiple type */\n\t                if (singleLength === 0) {\n\t                    if (multipleLength === 0) {\n\t                        if (referendumLength === 0) {\n\t                            stage = 'empty';\n\t                        } else {\n\t                            stage = 'referendum';\n\t                        }\n\t                    } else {\n\t                        stage = 'multiple';\n\t                    }\n\t                } else {\n\t                    stage = 'single';\n\t                }\n\t                var ballotCount = singleLength + multipleLength;\n\t                this.setState({\n\t                    stage: stage,\n\t                    hasVoted: data.hasVoted,\n\t                    election: data.election,\n\t                    single: data.single,\n\t                    multiple: data.multiple,\n\t                    referendum: data.referendum,\n\t                    ballotCount: ballotCount,\n\t                    referendumCount: referendumLength,\n\t                    unqualified: data.unqualified,\n\t                    supportLink: data.supportLink\n\t                });\n\t            }\n\t        }.bind(this));\n\t    },\n\t\n\t    setStage: function setStage(stage) {\n\t        window.scrollTo(0, 0);\n\t        this.setState({\n\t            stage: stage\n\t        });\n\t    },\n\t\n\t    getSingleKey: function getSingleKey(id) {\n\t        var found = 0;\n\t        $.each(this.state.single, function (index, value) {\n\t            if (id === value.id) {\n\t                found = index;\n\t            }\n\t        });\n\t        return found;\n\t    },\n\t\n\t    getMultipleKey: function getMultipleKey(id) {\n\t        var found = 0;\n\t        $.each(this.state.multiple, function (index, value) {\n\t            if (id === value.id) {\n\t                found = index;\n\t            }\n\t        });\n\t        return found;\n\t    },\n\t\n\t    getReferendumKey: function getReferendumKey(id) {\n\t        var found = 0;\n\t        $.each(this.state.referendum, function (index, value) {\n\t            if (id === value.id) {\n\t                found = index;\n\t            }\n\t        });\n\t        return found;\n\t    },\n\t\n\t    setCurrentSingle: function setCurrentSingle(id) {\n\t        this.setState({\n\t            currentSingle: id\n\t        });\n\t    },\n\t\n\t    setCurrentMultiple: function setCurrentMultiple(id) {\n\t        this.setState({\n\t            currentMultiple: id\n\t        });\n\t    },\n\t\n\t    setCurrentReferendum: function setCurrentReferendum(id) {\n\t        this.setState({\n\t            currentReferendum: id\n\t        });\n\t    },\n\t\n\t    resetStage: function resetStage(stage, id) {\n\t        switch (stage) {\n\t            case 'single':\n\t                this.setCurrentSingle(this.getSingleKey(id));\n\t                break;\n\t\n\t            case 'multiple':\n\t                this.setCurrentMultiple(this.getMultipleKey(id));\n\t                break;\n\t\n\t            case 'referendum':\n\t                this.setCurrentReferendum(this.getReferendumKey(id));\n\t                break;\n\t        }\n\t        this.setState({\n\t            backToReview: true,\n\t            stage: stage\n\t        });\n\t    },\n\t\n\t    updateSingleVote: function updateSingleVote(ticket) {\n\t        var stage = this.state.stage;\n\t        var current = this.state.currentSingle;\n\t        var nextSingle = current + 1;\n\t        var singleVote = this.state.singleVote;\n\t        var currentVote = singleVote[current];\n\t        currentVote = {\n\t            single: this.state.single[this.state.currentSingle],\n\t            ticket: ticket\n\t        };\n\t        singleVote[current] = currentVote;\n\t\n\t        if (this.state.backToReview) {\n\t            stage = 'review';\n\t        } else if (typeof this.state.single[nextSingle] === 'undefined') {\n\t            if (this.state.multiple.length > 0) {\n\t                stage = 'multiple';\n\t            } else if (this.state.referendum.length > 0) {\n\t                stage = 'referendum';\n\t            } else {\n\t                stage = 'review';\n\t            }\n\t        }\n\t        window.scrollTo(0, 0);\n\t        this.setState({\n\t            stage: stage,\n\t            singleVote: singleVote,\n\t            currentSingle: nextSingle\n\t        });\n\t    },\n\t\n\t    updateMultipleVote: function updateMultipleVote(chairs) {\n\t        var stage = this.state.stage;\n\t        var current = this.state.currentMultiple;\n\t        var nextMultiple = current + 1;\n\t        var multipleVote = this.state.multipleVote;\n\t        var currentVote = multipleVote[current];\n\t\n\t        currentVote = {\n\t            multiple: this.state.multiple[current],\n\t            chairs: chairs\n\t        };\n\t\n\t        multipleVote[current] = currentVote;\n\t\n\t        window.scrollTo(0, 0);\n\t        if (this.state.backToReview) {\n\t            stage = 'review';\n\t        } else if (typeof this.state.multiple[nextMultiple] === 'undefined') {\n\t            if (this.state.referendum.length > 0) {\n\t                stage = 'referendum';\n\t            } else {\n\t                stage = 'review';\n\t            }\n\t        }\n\t\n\t        this.setState({\n\t            stage: stage,\n\t            multipleVote: multipleVote,\n\t            currentMultiple: nextMultiple\n\t        });\n\t    },\n\t\n\t    updateReferendumVote: function updateReferendumVote(vote) {\n\t        var stage = this.state.stage;\n\t        var current = this.state.currentReferendum;\n\t        var nextReferendum = current + 1;\n\t        var referendumVote = this.state.referendumVote;\n\t        var currentVote = referendumVote[current];\n\t\n\t        currentVote = {\n\t            referendum: this.state.referendum[current],\n\t            answer: vote\n\t        };\n\t\n\t        referendumVote[current] = currentVote;\n\t\n\t        window.scrollTo(0, 0);\n\t        if (this.state.backToReview) {\n\t            stage = 'review';\n\t        } else if (typeof this.state.referendum[nextReferendum] === 'undefined') {\n\t            stage = 'review';\n\t        }\n\t\n\t        this.setState({\n\t            stage: stage,\n\t            referendumVote: referendumVote,\n\t            currentReferendum: nextReferendum\n\t        });\n\t    },\n\t\n\t    finalVote: function finalVote() {\n\t        var singleResult = [];\n\t        $.each(this.state.singleVote, function (index, value) {\n\t            if (value.single && typeof value.single.id !== 'undefined' && value.ticket && typeof value.ticket.id !== 'undefined') {\n\t                singleResult.push({\n\t                    singleId: value.single.id,\n\t                    ticketId: value.ticket.id\n\t                });\n\t            }\n\t        });\n\t\n\t        var multipleResult = [];\n\t        $.each(this.state.multipleVote, function (index, value) {\n\t            multipleResult.push({\n\t                multipleId: value.multiple.id,\n\t                chairs: value.chairs\n\t            });\n\t        });\n\t\n\t        var referendumResult = [];\n\t        $.each(this.state.referendumVote, function (index, value) {\n\t            referendumResult.push({\n\t                referendumId: value.referendum.id,\n\t                answer: value.answer\n\t            });\n\t        });\n\t        $.post('election/User/Vote', {\n\t            command: 'save',\n\t            electionId: this.state.election.id,\n\t            single: singleResult,\n\t            multiple: multipleResult,\n\t            referendum: referendumResult\n\t        }, null, 'json').done(function (data) {\n\t            if (data.success === true) {\n\t                this.setState({\n\t                    backToReview: false,\n\t                    stage: 'finished',\n\t                    surveyLink: data.surveyLink\n\t                });\n\t            } else {\n\t                this.setState({\n\t                    backToReview: false,\n\t                    stage: 'failure'\n\t                });\n\t            }\n\t        }.bind(this)).fail(function (data) {\n\t            this.setStage('failure');\n\t        }.bind(this));\n\t    },\n\t\n\t    render: function render() {\n\t        var content = null;\n\t        var review = null;\n\t\n\t        if (this.state.backToReview) {\n\t            review = React.createElement(\n\t                'button',\n\t                { className: 'btn btn-lg btn-block btn-info', onClick: this.setStage.bind(null, 'review') },\n\t                'Return to review without saving'\n\t            );\n\t        }\n\t\n\t        switch (this.state.stage) {\n\t            case 'loading':\n\t                content = React.createElement(\n\t                    'div',\n\t                    { className: 'text-center pad-top' },\n\t                    React.createElement('i', { className: 'fa fa-spinner fa-spin fa-5x' })\n\t                );\n\t                break;\n\t\n\t            case 'empty':\n\t                content = React.createElement(Empty, null);\n\t                break;\n\t\n\t            case 'finished':\n\t                content = React.createElement(Finished, { election: this.state.election, surveyLink: this.state.surveyLink });\n\t                break;\n\t\n\t            case 'single':\n\t                content = React.createElement(Single, { election: this.state.election,\n\t                    ballot: this.state.single[this.state.currentSingle],\n\t                    updateVote: this.updateSingleVote, vote: this.state.singleVote });\n\t                break;\n\t\n\t            case 'multiple':\n\t                content = React.createElement(Multiple, { election: this.state.election,\n\t                    ballot: this.state.multiple[this.state.currentMultiple],\n\t                    updateVote: this.updateMultipleVote, vote: this.state.multipleVote,\n\t                    unqualified: this.state.unqualified, supportLink: this.state.supportLink });\n\t                break;\n\t\n\t            case 'referendum':\n\t                content = React.createElement(Referendum, { election: this.state.election,\n\t                    referendum: this.state.referendum[this.state.currentReferendum],\n\t                    updateVote: this.updateReferendumVote, vote: this.state.referendumVote });\n\t                break;\n\t\n\t            case 'failure':\n\t                content = React.createElement(Failure, null);\n\t                break;\n\t\n\t            case 'review':\n\t                review = null;\n\t                content = React.createElement(Review, { election: this.state.election,\n\t                    single: this.state.single,\n\t                    multiple: this.state.multiple,\n\t                    referendum: this.state.referendum,\n\t                    singleVote: this.state.singleVote,\n\t                    multipleVote: this.state.multipleVote,\n\t                    referendumVote: this.state.referendumVote,\n\t                    finalVote: this.finalVote,\n\t                    resetStage: this.resetStage });\n\t                break;\n\t        }\n\t\n\t        var countdown = null;\n\t\n\t        if (this.state.stage === 'single' && this.state.singleVote.length === 0 && this.state.multipleVote.length === 0 && this.state.referendumVote.length === 0) {\n\t            countdown = React.createElement(Countdown, { ballotCount: this.state.ballotCount, referendumCount: this.state.referendumCount });\n\t        }\n\t\n\t        return React.createElement(\n\t            'div',\n\t            null,\n\t            countdown,\n\t            review,\n\t            content\n\t        );\n\t    }\n\t\n\t});\n\t\n\tvar Empty = function Empty() {\n\t    return React.createElement(\n\t        'div',\n\t        null,\n\t        React.createElement(\n\t            'h3',\n\t            null,\n\t            'No elections are available. Please check back later.'\n\t        )\n\t    );\n\t};\n\t\n\tvar Finished = React.createClass({\n\t    displayName: 'Finished',\n\t\n\t    getDefaultProps: function getDefaultProps() {\n\t        return {\n\t            election: {},\n\t            surveyLink: null\n\t        };\n\t    },\n\t\n\t    render: function render() {\n\t        return React.createElement(\n\t            'div',\n\t            { className: 'row' },\n\t            React.createElement(\n\t                'div',\n\t                { className: 'col-sm-6 col-sm-offset-3' },\n\t                React.createElement(\n\t                    'div',\n\t                    { className: 'well text-center' },\n\t                    React.createElement(\n\t                        'h2',\n\t                        null,\n\t                        this.props.election.title\n\t                    ),\n\t                    React.createElement(\n\t                        'h3',\n\t                        null,\n\t                        'Thank you for voting! Watch SGA for results.'\n\t                    ),\n\t                    React.createElement(\n\t                        'a',\n\t                        { href: './index.php?module=users&action=user&command=logout', className: 'btn btn-lg btn-primary' },\n\t                        'Sign out'\n\t                    ),\n\t                    React.createElement('hr', null),\n\t                    React.createElement(\n\t                        'p',\n\t                        null,\n\t                        'What do you think about the voting process? ',\n\t                        React.createElement(\n\t                            'a',\n\t                            { href: this.props.surveyLink },\n\t                            'Let us know!'\n\t                        )\n\t                    )\n\t                )\n\t            )\n\t        );\n\t    }\n\t\n\t});\n\t\n\tvar Countdown = React.createClass({\n\t    displayName: 'Countdown',\n\t\n\t    getInitialState: function getInitialState() {\n\t        return {\n\t            seen: false\n\t        };\n\t    },\n\t\n\t    getDefaultProps: function getDefaultProps() {\n\t        return {\n\t            ballotCount: 0,\n\t            referendumCount: 0,\n\t            vote: null\n\t        };\n\t    },\n\t\n\t    plural: function plural(item, single, _plural) {\n\t        if (typeof single === 'undefined' || single.length === 0) {\n\t            single = '';\n\t        }\n\t        if (typeof _plural === 'undefined' || _plural.length === 0) {\n\t            _plural = 's';\n\t        }\n\t        return item != 1 ? _plural : single;\n\t    },\n\t\n\t    render: function render() {\n\t        var ballots = null;\n\t        var referendum = null;\n\t        var totalItems = 0;\n\t        var isAre = 'are';\n\t        var and = '';\n\t\n\t        if (this.props.ballotCount > 0) {\n\t            totalItems += this.props.ballotCount;\n\t            ballots = this.props.ballotCount + ' ballot' + this.plural(this.props.ballotCount);\n\t        }\n\t\n\t        if (this.props.referendumCount > 0) {\n\t            totalItems += this.props.referendumCount;\n\t            referendum = this.props.referendumCount + ' referend' + this.plural(this.props.referendumCount, 'um', 'a');\n\t        }\n\t\n\t        if (totalItems < 2) {\n\t            isAre = 'is';\n\t        }\n\t\n\t        if (this.props.ballotCount > 0 && this.props.referendumCount > 0) {\n\t            and = 'and';\n\t        }\n\t\n\t        return React.createElement(\n\t            'div',\n\t            { className: 'alert alert-info' },\n\t            'There ',\n\t            isAre,\n\t            ' currently ',\n\t            ballots,\n\t            ' ',\n\t            and,\n\t            ' ',\n\t            referendum,\n\t            ' for you to vote on. We will review all your selections later, before your votes are submitted.'\n\t        );\n\t    }\n\t\n\t});\n\t\n\tvar Failure = React.createClass({\n\t    displayName: 'Failure',\n\t\n\t    render: function render() {\n\t        return React.createElement(\n\t            'div',\n\t            null,\n\t            React.createElement(\n\t                'h2',\n\t                null,\n\t                'Sorry'\n\t            ),\n\t            React.createElement(\n\t                'p',\n\t                null,\n\t                'Your vote failed to register. Please try again or report the problem.'\n\t            )\n\t        );\n\t    }\n\t\n\t});\n\t\n\tReactDOM.render(React.createElement(Election, null), document.getElementById('election'));\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** user.bundle.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap ff689538fbcf41e7bb55\n **/","'use strict';\n\nvar Election = React.createClass({\n    getInitialState: function() {\n        return {\n            election : null,\n            currentSingle : 0,\n            currentMultiple : 0,\n            currentReferendum : 0,\n            single : [],\n            multiple : [],\n            referendum : [],\n            ballotCount : 0,\n            referendumCount : 0,\n            stage : 'loading',\n            singleVote : [],\n            multipleVote : [],\n            referendumVote : [],\n            unqualified : [],\n            backToReview : false,\n            surveyLink : null,\n            supportLink : null\n        };\n    },\n\n    componentDidMount: function() {\n        this.load();\n    },\n\n    load: function() {\n        $.getJSON('election/User/Election', {\n        \tcommand : 'list'\n        }).done(function(data){\n            var stage = this.state.stage;\n            if (!data.election) {\n                this.setStage('empty');\n            } else if (data.hasVoted) {\n                this.setState({\n                    stage : 'finished',\n                    election : data.election\n                });\n            } else {\n                var singleLength = data.single.length;\n                var multipleLength = data.multiple.length;\n                var referendumLength = data.referendum.length;\n\n                /* If there are no single-type elections, then skip to multiple type */\n                if (singleLength === 0) {\n                    if (multipleLength === 0) {\n                        if (referendumLength === 0) {\n                            stage = 'empty';\n                        } else {\n                            stage = 'referendum';\n                        }\n                    } else {\n                        stage = 'multiple';\n                    }\n                } else {\n                    stage = 'single';\n                }\n                var ballotCount = singleLength + multipleLength;\n                this.setState({\n                    stage : stage,\n                    hasVoted : data.hasVoted,\n                    election : data.election,\n                    single : data.single,\n                    multiple : data.multiple,\n                    referendum : data.referendum,\n                    ballotCount : ballotCount,\n                    referendumCount : referendumLength,\n                    unqualified : data.unqualified,\n                    supportLink : data.supportLink\n                });\n            }\n\n        }.bind(this));\n    },\n\n    setStage : function(stage) {\n        window.scrollTo(0,0);\n        this.setState({\n            stage : stage\n        });\n    },\n\n    getSingleKey : function(id) {\n        var found = 0;\n        $.each(this.state.single, function(index, value){\n            if (id === value.id) {\n                found = index;\n            }\n        });\n        return found;\n    },\n\n    getMultipleKey : function(id) {\n        var found = 0;\n        $.each(this.state.multiple, function(index, value){\n            if (id === value.id) {\n                found = index;\n            }\n        });\n        return found;\n    },\n\n    getReferendumKey : function(id) {\n        var found = 0;\n        $.each(this.state.referendum, function(index, value){\n            if (id === value.id) {\n                found = index;\n            }\n        });\n        return found;\n    },\n\n    setCurrentSingle : function(id) {\n        this.setState({\n            currentSingle : id\n        });\n    },\n\n    setCurrentMultiple : function(id) {\n        this.setState({\n            currentMultiple : id\n        });\n    },\n\n    setCurrentReferendum : function(id) {\n        this.setState({\n            currentReferendum : id\n        });\n    },\n\n    resetStage : function(stage, id) {\n        switch(stage) {\n            case 'single':\n            this.setCurrentSingle(this.getSingleKey(id));\n            break;\n\n            case 'multiple':\n            this.setCurrentMultiple(this.getMultipleKey(id));\n            break;\n\n            case 'referendum':\n            this.setCurrentReferendum(this.getReferendumKey(id));\n            break;\n        }\n        this.setState({\n            backToReview : true,\n            stage : stage\n        });\n    },\n\n    updateSingleVote : function(ticket) {\n        var stage = this.state.stage;\n        var current = this.state.currentSingle;\n        var nextSingle = current + 1;\n        var singleVote = this.state.singleVote;\n        var currentVote = singleVote[current];\n        currentVote = {\n            single : this.state.single[this.state.currentSingle],\n            ticket : ticket\n        };\n        singleVote[current] = currentVote;\n\n        if (this.state.backToReview) {\n            stage = 'review';\n        } else if (typeof this.state.single[nextSingle] === 'undefined') {\n            if (this.state.multiple.length > 0) {\n                stage = 'multiple';\n            } else if (this.state.referendum.length > 0) {\n                stage = 'referendum';\n            } else {\n                stage = 'review';\n            }\n        }\n        window.scrollTo(0,0);\n        this.setState({\n            stage : stage,\n            singleVote : singleVote,\n            currentSingle : nextSingle\n        });\n    },\n\n    updateMultipleVote: function(chairs) {\n        var stage = this.state.stage;\n        var current = this.state.currentMultiple;\n        var nextMultiple = current + 1;\n        var multipleVote = this.state.multipleVote;\n        var currentVote = multipleVote[current];\n\n        currentVote = {\n            multiple : this.state.multiple[current],\n            chairs : chairs\n        };\n\n        multipleVote[current] = currentVote;\n\n        window.scrollTo(0,0);\n        if (this.state.backToReview) {\n            stage = 'review';\n        } else if (typeof this.state.multiple[nextMultiple] === 'undefined') {\n            if (this.state.referendum.length > 0) {\n                stage = 'referendum';\n            } else {\n                stage = 'review';\n            }\n        }\n\n        this.setState({\n            stage : stage,\n            multipleVote : multipleVote,\n            currentMultiple : nextMultiple\n        });\n    },\n\n    updateReferendumVote : function(vote) {\n        var stage = this.state.stage;\n        var current = this.state.currentReferendum;\n        var nextReferendum = current + 1;\n        var referendumVote = this.state.referendumVote;\n        var currentVote = referendumVote[current];\n\n        currentVote = {\n            referendum : this.state.referendum[current],\n            answer : vote\n        };\n\n        referendumVote[current] = currentVote;\n\n        window.scrollTo(0,0);\n        if (this.state.backToReview) {\n            stage = 'review';\n        } else if (typeof this.state.referendum[nextReferendum] === 'undefined') {\n            stage = 'review';\n        }\n\n        this.setState({\n            stage : stage,\n            referendumVote : referendumVote,\n            currentReferendum : nextReferendum\n        });\n    },\n\n    finalVote : function() {\n        var singleResult = [];\n        $.each(this.state.singleVote, function(index, value){\n            if (value.single && typeof value.single.id !== 'undefined' &&\n                value.ticket && typeof value.ticket.id !== 'undefined') {\n                singleResult.push({\n                    singleId : value.single.id,\n                    ticketId : value.ticket.id\n                });\n            }\n        });\n\n        var multipleResult = [];\n        $.each(this.state.multipleVote, function(index, value){\n            multipleResult.push({\n                multipleId : value.multiple.id,\n                chairs : value.chairs\n            });\n        });\n\n        var referendumResult = [];\n        $.each(this.state.referendumVote, function(index, value){\n            referendumResult.push({\n                referendumId : value.referendum.id,\n                answer : value.answer\n            });\n        });\n        $.post('election/User/Vote', {\n            command : 'save',\n            electionId : this.state.election.id,\n            single : singleResult,\n            multiple : multipleResult,\n            referendum : referendumResult\n        }, null, 'json')\n            .done(function(data){\n                if (data.success === true) {\n                    this.setState({\n                        backToReview : false,\n                        stage : 'finished',\n                        surveyLink : data.surveyLink\n                    });\n                } else {\n                    this.setState({\n                        backToReview : false,\n                        stage : 'failure'\n                    });\n                }\n            }.bind(this))\n            .fail(function(data){\n                this.setStage('failure');\n            }.bind(this));\n    },\n\n    render: function() {\n        var content = null;\n        var review = null;\n\n        if (this.state.backToReview) {\n            review = <button className=\"btn btn-lg btn-block btn-info\" onClick={this.setStage.bind(null, 'review')}>Return to review without saving</button>\n        }\n\n        switch (this.state.stage) {\n            case 'loading':\n            content = <div className=\"text-center pad-top\"><i className=\"fa fa-spinner fa-spin fa-5x\"></i></div>;\n            break;\n\n            case 'empty':\n            content = <Empty />;\n            break;\n\n            case 'finished':\n            content = <Finished election={this.state.election} surveyLink={this.state.surveyLink}/>;\n            break;\n\n            case 'single':\n            content = <Single election={this.state.election}\n                ballot={this.state.single[this.state.currentSingle]}\n                updateVote={this.updateSingleVote} vote={this.state.singleVote}/>;\n            break;\n\n            case 'multiple':\n            content = <Multiple election={this.state.election}\n                ballot={this.state.multiple[this.state.currentMultiple]}\n                updateVote={this.updateMultipleVote} vote={this.state.multipleVote}\n                unqualified={this.state.unqualified} supportLink={this.state.supportLink}/>\n            break;\n\n            case 'referendum':\n            content = <Referendum election={this.state.election}\n                referendum={this.state.referendum[this.state.currentReferendum]}\n                updateVote={this.updateReferendumVote} vote={this.state.referendumVote}/>\n            break;\n\n            case 'failure':\n                content = <Failure />;\n            break;\n\n            case 'review':\n            review = null;\n            content = <Review election={this.state.election}\n                single={this.state.single}\n                multiple={this.state.multiple}\n                referendum={this.state.referendum}\n                singleVote={this.state.singleVote}\n                multipleVote={this.state.multipleVote}\n                referendumVote={this.state.referendumVote}\n                finalVote={this.finalVote}\n                resetStage={this.resetStage}/>\n            break;\n        }\n\n        var countdown = null;\n\n        if (this.state.stage === 'single' && this.state.singleVote.length === 0\n            && this.state.multipleVote.length === 0\n            && this.state.referendumVote.length === 0) {\n            countdown = (<Countdown ballotCount={this.state.ballotCount} referendumCount={this.state.referendumCount}/>);\n        }\n\n        return (\n            <div>\n                {countdown}\n                {review}\n                {content}\n            </div>\n        );\n    }\n\n});\n\nvar Empty = function() {\n    return (\n        <div>\n            <h3>No elections are available. Please check back later.</h3>\n        </div>\n    );\n}\n\nvar Finished = React.createClass({\n    getDefaultProps: function() {\n        return {\n            election : {},\n            surveyLink : null\n        };\n    },\n\n    render: function() {\n        return (\n            <div className=\"row\">\n                <div className=\"col-sm-6 col-sm-offset-3\">\n                    <div className=\"well text-center\">\n                        <h2>{this.props.election.title}</h2>\n                        <h3>Thank you for voting! Watch SGA for results.</h3>\n                        <a href=\"./index.php?module=users&action=user&command=logout\" className=\"btn btn-lg btn-primary\">Sign out</a>\n                        <hr />\n                        <p>What do you think about the voting process? <a href={this.props.surveyLink}>Let us know!</a></p>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n});\n\nvar Countdown = React.createClass({\n    getInitialState: function() {\n        return {\n            seen : false\n        };\n    },\n\n    getDefaultProps: function() {\n        return {\n            ballotCount : 0,\n            referendumCount : 0,\n            vote : null\n        };\n    },\n\n    plural: function(item, single, plural) {\n        if (typeof single === 'undefined' || single.length === 0) {\n            single = '';\n        }\n        if (typeof plural === 'undefined' || plural.length === 0) {\n            plural = 's';\n        }\n        return (item != 1 ? plural : single);\n    },\n\n    render: function() {\n        var ballots = null;\n        var referendum = null;\n        var totalItems = 0;\n        var isAre = 'are';\n        var and = '';\n\n        if (this.props.ballotCount > 0) {\n            totalItems += this.props.ballotCount;\n            ballots = this.props.ballotCount + ' ballot' + this.plural(this.props.ballotCount);\n        }\n\n        if (this.props.referendumCount > 0) {\n            totalItems += this.props.referendumCount;\n            referendum = this.props.referendumCount + ' referend' + this.plural(this.props.referendumCount, 'um', 'a')\n        }\n\n        if (totalItems < 2) {\n            isAre = 'is';\n        }\n\n        if (this.props.ballotCount > 0 && this.props.referendumCount > 0) {\n            and = 'and';\n        }\n\n        return (\n            <div className=\"alert alert-info\">\n                There {isAre} currently {ballots} {and} {referendum} for you to vote on. We will review all your selections later, before your votes are submitted.\n            </div>\n        );\n    }\n\n});\n\nvar Failure = React.createClass({\n    render: function() {\n        return (\n            <div>\n                <h2>Sorry</h2>\n                <p>Your vote failed to register. Please try again or report the problem.</p>\n            </div>\n        );\n    }\n\n});\n\nReactDOM.render(<Election/>, document.getElementById('election'));\n\n\n\n/** WEBPACK FOOTER **\n ** ./javascript/User/src/Election.jsx\n **/"],"sourceRoot":""}